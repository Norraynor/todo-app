(()=>{"use strict";const e=function(e,t,n,o=!1){return{getTitle:function(){return e},getDueDate:function(){return t},getPriority:function(){return n},setChecked:function(e){o=e},getChecked:function(){return o}}},t=function(e,t=!1){let n=[];return{addToDoItem:function(e){n.push(e)},getToDoItems:function(){return n},getToDoItem:function(e){return n[e]},getTitle:function(){return e},setChecked:function(e){t=e},getChecked:function(){return t},getSelected:function(){let e="";for(let t=0;t<n.length;t++)n[t].getChecked()&&(e=n[t]);return e},deselect:function(){for(let e=0;e<n.length;e++)n[e].setChecked(!1)},select:function(e){console.log(e),e=e.replace("-todo","");for(let t=0;t<n.length;t++)n[t].getTitle()===e&&n[t].setChecked(!0)},getParametersString:function(){return"project,"+e+","+t}}},n=function(e,t,n,o,r=!1){let c=[];return{addChecklistItem:function(e){c.push(e)},getTitle:function(){return e},getDescription:function(){return t},getDueDate:function(){return n},getPriority:function(){return o},setChecked:function(e){r=e},getChecked:function(){return r},deselect:function(){for(let e=0;e<c.length;e++)c[e].setChecked(!1)},select:function(e){console.log(e),e=e.replace("-checklist","");for(let t=0;t<c.length;t++)c[t].getTitle()===e&&c[t].setChecked(!0)},getChecklistItem:function(e){return c[e]},getChecklistItems:function(){return c},getParametersString:function(c){return"todo,"+e+","+t+","+n+","+o+","+r+","+c}}},o=function(){let o=[];const r=t("templateProject"),c=function(e){return o.push(e)};return c(r),r.setChecked("true"),o[0].addToDoItem(n("templateToDo","this is a template project","no dates yet",6)),o[0].getToDoItem(0).addChecklistItem(e("template checklist item","no dates yet",6)),c(t("project1")),o[1].addToDoItem(n("projectTodo","this is a template project","no dates yet",6)),{addProject:c,getProject:function(e){return o[e]},getProjects:function(){return o},deselect:function(){for(let e=0;e<o.length;e++)o[e].setChecked(!1)},select:function(e){console.log(e),e=e.replace("-project","");for(let t=0;t<o.length;t++)o[t].getTitle()===e&&o[t].setChecked(!0)},getSelected:function(){let e="";for(let t=0;t<o.length;t++)o[t].getChecked()&&(e=o[t]);return e},clearProjects:function(){o=[]}}}(),r=function(){let e=window.localStorage;function r(){e.clear(),function(){let t=o.getProjects(),n="",r=[];for(let e=0;e<t.length;e++)r[e]=t[e].getParametersString();n=r.join(","),e.setItem("projects",JSON.stringify(n)),console.log("projects saved...")}(),function(){let t=o.getProjects(),n=[],r="",c=[];for(let e=0;e<t.length;e++){let o=t[e].getToDoItems();for(let n=0;n<o.length;n++)c[n]=o[n].getParametersString(t[e].getTitle());n[e]=c.join(",")}r=n.join(","),e.setItem("todos",JSON.stringify(r)),console.log("todos saved...")}()}function c(){!function(){let n="";o.clearProjects(),n=JSON.parse(e.getItem("projects"));let r=n.split(",");for(let e=0;e<r.length;e+=3){let n=r.slice(e,e+3);"project"===n[0]&&("true"===n[2]?o.addProject(t(n[1],!0)):o.addProject(t(n[1],!1)))}console.log("projects loaded...")}(),function(){let t="";t=JSON.parse(e.getItem("todos"));let r=t.split(",");console.log(r);for(let e=0;e<r.length;e+=7){let t=r.slice(e,e+7);if("todo"===t[0]){console.log(t);let e=o.getProjects();for(let o=0;o<e.length;o++)e[o].getTitle()===t[6]&&("true"===t[5]?e[o].addToDoItem(n(t[1],t[2],t[3],t[4],!0)):e[o].addToDoItem(n(t[1],t[2],t[3],t[4],!1)))}}console.log("todos loaded...")}()}return r(),o.clearProjects(),c(),{saveAll:r,loadAll:c}}(),c=function(){const c=document.querySelector("#form-div"),l=document.querySelector("#element-title"),i=document.querySelector(".element-title"),s=document.querySelector("#element-description"),d=document.querySelector(".element-description"),a=document.querySelector("#element-priority"),u=document.querySelector(".element-priority"),g=document.querySelector("#element-due-date"),m=document.querySelector(".element-due-date"),p=document.querySelector("#form-title"),h=document.querySelector("#alert"),f=document.querySelector("#submit-button");let C="";function v(){c.classList.remove("show"),c.classList.add("hide")}function T(){i.classList.remove("hide"),i.classList.remove("show"),d.classList.remove("hide"),d.classList.remove("show"),u.classList.remove("hide"),u.classList.remove("show"),m.classList.remove("hide"),m.classList.remove("show")}function D(c){let i=!0;if(l.value?l.style.borderColor="green":(h.textContent="Title missing",l.style.borderColor="red",i=!1,c.preventDefault()),"todo"===C&&(s.value?s.style.borderColor="green":(h.textContent="Description missing",s.style.borderColor="red",i=!1,c.preventDefault())),"todo"!==C&&"checklist"!==C||(a.value?a.style.borderColor="green":(h.textContent="Set Priority",a.style.borderColor="red",i=!1,c.preventDefault())),"todo"!==C&&"checklist"!==C||(g.value?g.style.borderColor="green":(h.textContent="Set Due Date",g.style.borderColor="red",i=!1,c.preventDefault())),i){switch(C){case"project":o.addProject(t(l.value)),L.displayProjects();break;case"todo":o.getSelected().addToDoItem(n(l.value,s.value,g.value,a.value)),L.displayTodos();break;case"checklist":o.getSelected().getSelected().addChecklistItem(e(l.value,g.value,a.value)),L.displayProjects()}h.textContent="",v(),c.preventDefault(),l.value="",s.value="",a.value="",g.value="",L.updateInputs(),r.saveAll()}}return f.addEventListener("click",D),{showForm:function(){c.classList.remove("hide"),c.classList.add("show")},hideForm:v,projectForm:function(){C="project",p.textContent="Project",T(),i.classList.add("show"),d.classList.add("hide"),u.classList.add("hide"),m.classList.add("hide")},toDoForm:function(){C="todo",p.textContent="To Do",T(),i.classList.add("show"),d.classList.add("show"),u.classList.add("show"),m.classList.add("show")},checklistForm:function(){C="checklist",p.textContent="Checklist",T(),i.classList.add("show"),d.classList.add("hide"),u.classList.add("show"),m.classList.add("show")},getFormData:D}}(),l=(document.querySelector(".newProjectButton").addEventListener("click",(()=>{c.showForm(),c.projectForm()})),document.querySelector(".newTodoButton").addEventListener("click",(()=>{o.getSelected()?(c.showForm(),c.toDoForm()):alert("select project")})),document.querySelector(".newChecklistButton").addEventListener("click",(()=>{o.getSelected().getSelected()?(c.showForm(),c.checklistForm()):alert("select To do")})),function(){const e=document.querySelector(".project-container"),t=document.querySelector(".todo-container"),n=document.querySelector(".description");function o(){e.textContent=""}function r(){t.textContent=""}function c(){n.textContent=""}return{createProject:function(t,n=!1){const o=document.createElement("input");o.classList.add("project-toggle"),o.type="radio",o.checked=n;let r=t.split(" ").join("-")+"-project";o.id=r,o.name="projects";const c=document.createElement("label");c.classList.add("projectButton"),c.htmlFor=r,c.innerText=t;const l=document.createElement("div");l.classList.add("arrows");const i=document.createElement("button");i.classList.add("priority-change","arrow","up");const s=document.createElement("button");s.classList.add("priority-change","arrow","down"),l.appendChild(i),l.appendChild(s),c.appendChild(l),e.appendChild(o),e.appendChild(c)},defaultState:function(){o(),r(),c()},createTodos:function(e,n,o=!1){const r=document.createElement("input");r.classList.add("todo-toggle"),r.type="radio",r.checked=o;let c=e.split(" ").join("-")+"-todo";r.id=c,r.name="todo";const l=document.createElement("label");l.classList.add("todoButton"),l.htmlFor=c,l.innerText=e;const i=document.createElement("p");i.classList.add("completion-status","not-completed"),i.textContent="not completed",l.appendChild(i);const s=document.createElement("div");s.classList.add("due-date");const d=document.createElement("p");d.textContent=n,s.appendChild(d),l.appendChild(s);const a=document.createElement("div");a.classList.add("arrows");const u=document.createElement("button");u.classList.add("priority-change","arrow","up");const g=document.createElement("button");g.classList.add("priority-change","arrow","down"),a.appendChild(u),a.appendChild(g),l.appendChild(a),t.appendChild(r),t.appendChild(l)},createChecklist:function(e,t){const n=document.querySelector(".description"),o=document.querySelector(".checklist"),r=document.createElement("div");r.classList.add("checklist-item");const c=document.createElement("input");c.classList.add("checklist-toggle"),c.type="checkbox";let l=e.split(" ").join("-")+"-checklist";c.id=l,c.name="checklist",c.checked="";const i=document.createElement("label");i.classList.add("checklistButton"),i.htmlFor=l,i.innerText=e;const s=document.createElement("p");s.textContent=t,i.appendChild(s),r.appendChild(c),r.appendChild(i),o.appendChild(r),n.appendChild(o)},defaultProjects:o,defaultTodos:r,defaultChecklist:c,updateToDoTitle:function(e,t){const n=document.querySelector(".description");n.textContent="";const o=document.createElement("h4");o.classList.add("content-title"),o.textContent=e;const r=document.createElement("div");r.classList.add("short-description"),r.textContent=t;const c=document.createElement("div");c.classList.add("checklist"),n.appendChild(o),n.appendChild(r),n.appendChild(c)},changeTodoCompletion:function(e,t=!1){const n=document.querySelector(`#${e.getTitle()}-todo+label`).querySelector(".completion-status");t?(n.classList.remove("not-completed"),n.classList.add("completed"),n.textContent="before deadline"):(n.classList.remove("completed"),n.classList.add("not-completed"),n.textContent="after deadline")}}}());function i(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function s(e){i(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function d(e,t){i(2,arguments);var n=s(e),o=s(t),r=n.getTime()-o.getTime();return r<0?-1:r>0?1:r}function a(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var u=36e5,g={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},m=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,p=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,h=/^([+-])(\d{2})(?::?(\d{2}))?$/;function f(e,t){i(1,arguments);var n=t||{},o=null==n.additionalDigits?2:a(n.additionalDigits);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,c=C(e);if(c.date){var l=v(c.date,o);r=T(l.restDateString,l.year)}if(isNaN(r)||!r)return new Date(NaN);var s,d=r.getTime(),u=0;if(c.time&&(u=y(c.time),isNaN(u)||null===u))return new Date(NaN);if(!c.timezone){var g=new Date(d+u),m=new Date(0);return m.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),m.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),m}return s=j(c.timezone),isNaN(s)?new Date(NaN):new Date(d+u+s)}function C(e){var t,n={},o=e.split(g.dateTimeDelimiter);if(o.length>2)return n;if(/:/.test(o[0])?(n.date=null,t=o[0]):(n.date=o[0],t=o[1],g.timeZoneDelimiter.test(n.date)&&(n.date=e.split(g.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var r=g.timezone.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}function v(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),o=e.match(n);if(!o)return{year:null};var r=o[1]&&parseInt(o[1]),c=o[2]&&parseInt(o[2]);return{year:null==c?r:100*c,restDateString:e.slice((o[1]||o[2]).length)}}function T(e,t){if(null===t)return null;var n=e.match(m);if(!n)return null;var o=!!n[4],r=D(n[1]),c=D(n[2])-1,l=D(n[3]),i=D(n[4]),s=D(n[5])-1;if(o)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,i,s)?function(e,t,n){var o=new Date(0);o.setUTCFullYear(e,0,4);var r=7*(t-1)+n+1-(o.getUTCDay()||7);return o.setUTCDate(o.getUTCDate()+r),o}(t,i,s):new Date(NaN);var d=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(k[t]||(w(e)?29:28))}(t,c,l)&&function(e,t){return t>=1&&t<=(w(e)?366:365)}(t,r)?(d.setUTCFullYear(t,c,Math.max(r,l)),d):new Date(NaN)}function D(e){return e?parseInt(e):1}function y(e){var t=e.match(p);if(!t)return null;var n=S(t[1]),o=S(t[2]),r=S(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,o,r)?n*u+6e4*o+1e3*r:NaN}function S(e){return e&&parseFloat(e.replace(",","."))||0}function j(e){if("Z"===e)return 0;var t=e.match(h);if(!t)return 0;var n="+"===t[1]?-1:1,o=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,r)?n*(o*u+6e4*r):NaN}var k=[31,null,31,30,31,30,31,31,30,31,30,31];function w(e){return e%400==0||e%4==0&&e%100}const L=function(){function e(){const e=[...document.querySelectorAll(".checklist-toggle")],t=[...document.querySelectorAll(".project-toggle")],c=[...document.querySelectorAll(".todo-toggle")];function i(e){let t=o.getSelected();t.deselect(),t.select(e.target.id),l.updateToDoTitle(t.getSelected().getTitle(),t.getSelected().getDescription()),t.getSelected()&&r(t.getSelected())}function s(e){let t=o.getSelected().getSelected();t.deselect(),t.select(e.target.id),console.log("currently selected checklist: "+t.getTitle())}for(let e=0;e<t.length;e++)t[e].projectEvent&&t[e].removeEventListener("change",t[e].projectEvent),t[e].projectEvent=e=>{o.deselect(),o.select(e.target.id),n()},t[e].addEventListener("change",t[e].projectEvent);for(let e=0;e<c.length;e++)c[e].addEventListener("change",i);for(let t=0;t<e.length;t++)e[t].addEventListener("change",s)}function t(){const t=o.getProjects();l.defaultState();for(let e=0;e<t.length;e++)l.createProject(t[e].getTitle(),o.getProject(e).getChecked());o.getSelected()&&n(),e()}function n(){l.defaultTodos();let t=o.getSelected();if(t){for(let e=0;e<t.getToDoItems().length;e++){let n=t.getToDoItem(e);l.createTodos(n.getTitle(),n.getDueDate(),n.getChecked()),n.getChecked()&&l.updateToDoTitle(t.getSelected().getTitle(),t.getSelected().getDescription()),-1===d(Date.now(),f(n.getDueDate()))?l.changeTodoCompletion(n,!0):l.changeTodoCompletion(n,!1)}t.getSelected()}e()}function r(e){if(l.defaultChecklist(),console.log(e.getTitle()),l.updateToDoTitle(e.getTitle(),e.getDescription()),e)for(let t=0;t<e.getChecklistItems().length;t++){let n=e.getChecklistItem(t);l.createChecklist(n.getTitle(),n.getDueDate())}}return t(),{displayProjects:t,displayTodos:n,displayChecklist:r,updateInputs:e}}()})();